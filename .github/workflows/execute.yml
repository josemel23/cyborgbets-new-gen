name: Ejecutar Scraper o Deploy

on:
  workflow_dispatch:
    inputs:
      accion:
        description: 'Acción a ejecutar (scraper o deploy)'
        required: true
      liga:
        description: 'Nombre del scraper (opcional)'
        required: false

jobs:
  ejecutar:
    runs-on: ubuntu-latest
    steps:
      - name: Clonar repositorio
        uses: actions/checkout@v3

      - name: Configurar Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.x'

      - name: Instalar dependencias
        run: pip install -r requirements.txt

      - name: Ejecutar Acción
        run: |
          if [ "${{ github.event.inputs.accion }}" == "scraper" ]; then
            python scrapers/${{ github.event.inputs.liga }}.py
          elif [ "${{ github.event.inputs.accion }}" == "deploy" ]; then
            npm install -g firebase-tools
            firebase deploy --token ${{ secrets.FIREBASE_TOKEN }}
          fi
